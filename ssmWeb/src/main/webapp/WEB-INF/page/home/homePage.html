<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>首页</title>
    <link rel="stylesheet" href="/plugin/layui/css/layui.css" />
    <script type="text/javascript" src="/js/jquery-3.4.0.js"></script>
    <script src="/plugin/layui/layui.js"></script>
</head>
<body class="layui-layout-body">
<div class="layui-layout layui-layout-admin">
    <div class="layui-header">
        <div class="layui-logo"><span style="font-size: medium; ">个人信息管理系统</span></div>
        <!-- 头部区域（可配合layui已有的水平导航） -->
        <ul class="layui-nav layui-layout-left">
            <li class="layui-nav-item"><a href="">用户管理</a></li>
            <li class="layui-nav-item"><a href="">图书管理</a></li>
            <li class="layui-nav-item"><a href="">系统管理</a></li>
            <li class="layui-nav-item">
                <a href="javascript:void(0);">其它系统</a>
                <dl class="layui-nav-child">
                    <dd><a href="">邮件管理</a></dd>
                    <dd><a href="">消息管理</a></dd>
                    <dd><a href="">授权管理</a></dd>
                </dl>
            </li>
        </ul>
        <ul class="layui-nav layui-layout-right">
            <li class="layui-nav-item">
                <a href="javascript:void(0);">
                    <img src="/images/background.jpg" class="layui-nav-img">
                    LD
                </a>
                <dl class="layui-nav-child">
                    <dd><a href="">基本资料</a></dd>
                    <!--<dd><a href="">安全设置</a></dd>-->
                </dl>
            </li>
            <li class="layui-nav-item"><a href="javascript:exitLogin();">退出登录</a></li>
        </ul>
    </div>

    <div class="layui-side layui-bg-black">
        <div class="layui-side-scroll">
            <!-- 左侧导航区域（可配合layui已有的垂直导航） -->
            <ul class="layui-nav layui-nav-tree"  lay-filter="test">
                <li class="layui-nav-item layui-nav-itemed">
                    <a href="javascript:void(0);">人员管理</a>
                    <dl class="layui-nav-child">
                        <dd><a href="javascript:void(0);">人员信息列表</a></dd>
                        <dd><a href="javascript:void(0);">列表二</a></dd>
                        <dd><a href="javascript:void(0);">列表三</a></dd>
                        <dd><a href="">超链接</a></dd>
                    </dl>
                </li>
                <li class="layui-nav-item">
                    <a href="javascript:void(0);">解决方案</a>
                    <dl class="layui-nav-child">
                        <dd><a href="javascript:void(0);">列表一</a></dd>
                        <dd><a href="javascript:void(0);">列表二</a></dd>
                        <dd><a href="">超链接</a></dd>
                    </dl>
                </li>
                <li class="layui-nav-item"><a href="">云市场</a></li>
                <li class="layui-nav-item"><a href="">发布商品</a></li>
            </ul>
        </div>
    </div>

    <div class="layui-body">
        <!-- 内容主体区域 -->
        <div style="padding: 15px;">
            <table id="personInfoList" lay-filter="test"></table>
            <!--<img src="/images/background.jpg">-->
        </div>
    </div>

    <div class="layui-footer">
        <!-- 底部固定区域 -->
        © dong.com - 底部固定区域
    </div>
</div>
<script type="text/javascript">
    var path = '${rc.contextPath}';
</script>
<!--操作按钮-->
<script type="text/html" id="toolBarButton">
    <a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="detail">查看</a>
    <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
    <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
</script>
<script>
    $(function () {
        // var path = '${rc.contextPath}';
        alert(path);
    })
    //JavaScript代码区域
    layui.use(['element','table'], function(){
        var table = layui.table;
        //第一个实例
        table.render({
            elem: '#personInfoList',
            height: 500,
            url: '/user/findUserInfoList', //数据接口,
            method: 'POST',
            page: true, //开启分页,
            even: true,
            skin: 'row',
            parseData: function(res){ //res 即为原始返回的数据
                return {
                    "code": 0, //解析接口状态
                    "msg": "查询成功", //解析提示文本
                    "count": 10, //解析数据长度
                    "data": res //解析数据列表
                };
            },
            cols: [[ //表头
                {type: 'numbers', title: '序号', width:'5%' },
                {field: 'id', title: '主键', width:'15%',align: 'center'},
                {field: 'userName', title: '姓名', width:'15%',align: 'center'},
                {field: 'sex', title: '性别', width:'10%',align: 'center', sort: true},
                {field: 'age', title: '年龄', width:'10%',align: 'center', sort: true},
                {field: 'loginName', title: '用户名', width:'15%',align: 'center'},
                {field: 'password', title: '密码', width: '15%',align: 'center'},
                {fixed: 'right',title: '操作', width: '15%',align: 'center',toolbar: '#toolBarButton'}
            ]]/*,
            done: function(res, curr, count){
                //如果是直接赋值的方式，res即为：{data: [], count: 99} data为当前页数据、count为数据总长度
                var html = "<div>查看</div>";
                console.log(res);
                //得到当前页码
                console.log(curr);
                //得到数据总量
                console.log(count);
                return html;
            }*/
        });

        //监听行工具事件
        //注：tool 是工具条事件名，test 是 table 原始容器的属性 lay-filter="对应的值"
        table.on('tool(test)', function(obj){
            var data = obj.data, //获得当前行数据
                layEvent = obj.event; //获得 lay-event 对应的值
            if(layEvent === 'detail'){
                layer.msg('查看操作');
                layer.open({
                    type: 2,
                    area:['60%','60%'],
                    content: '${pageContext.request.contextPath}/login/register.html' //这里content是一个URL，如果你不想让iframe出现滚动条，你还可以content: ['http://sentsin.com', 'no']
                });
            } else if(layEvent === 'del'){
                layer.confirm('真的删除行么', function(index){
                    obj.del(); //删除对应行（tr）的DOM结构
                    layer.close(index);
                    //向服务端发送删除指令
                });
            } else if(layEvent === 'edit'){
                layer.msg('编辑操作');
            }
        });
    });
    //退出登录
    function exitLogin() {
        window.location.replace("/loginRegister/goLoginView")
    }


</script>
</body>
</html>